# Honeycomb

Another hex grid library made in JavaScript, heavily inspired by [Red Blob Games'](http://www.redblobgames.com/grids/hexagons/) code samples.

All existing JS hex grid libraries I could find are coupled with some form of view. Most often a `<canvas>` element or the browser DOM. I want more separation of concerns...and a new hobby project to spend countless hours on.

## Installation

```bash
npm i honeycomb-grid
```

## Documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Grid

Factory function for creating grids. It accepts optional hex settings that are passed directly to [HexFactory](#hexfactory). Several "shape" methods are exposed that return an array of hexes in a certain shape.

A grid is _viewless_, i.e.: it's an abstract grid with undefined dimensions. If you want to render a tangible grid, use {@link View).

**Parameters**

-   `hexSettings` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Optional settings that apply to _all_ hexes in the grid. See [Hexfactory](Hexfactory) for possible properties.

**Examples**

```javascript
import { Grid, HEX_ORIENTATIONS } from 'Honeycomb'

const grid = Grid({
    size: 50,
    orientation: HEX_ORIENTATIONS.POINTY
})

grid.triangle(3)
```

Returns **[Grid](#grid)** A grid instance.

### Grid#pointToHex

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/#pixel-to-hex)**

Converts the passed 2-dimensional [point](#point) to a hex.

**Parameters**

-   `point` **[Point](#point)** The point to convert from.

Returns **[Hex](#hex)** The hex (with rounded coordinates) the passed 2D point corresponds to.

### Grid#hexToPoint

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/#hex-to-pixel)**

Translates a hex coordinate to a point.

**Parameters**

-   `hex` **[Hex](#hex)** The hex to translate from.

Returns **[Point](#point)** The point to translate to.

### Grid#colSize

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/#basics)**

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The width of a (vertical) column of hexes in the grid.

### Grid#rowSize

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/#basics)**

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The height of a (horizontal) row of hexes in the grid.

### Grid#parallelogram

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/implementation.html#map-shapes)**

Creates a grid in the shape of a [parallelogram](https://en.wikipedia.org/wiki/Parallelogram).

**Parameters**

-   `widthOrOptions` **([Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object))** The width (in hexes) or an options object.
-   `height` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** The height (in hexes).
-   `start` **[Hex](#hex)** The origin hex. (optional, default `Hex()`)
-   `direction` **(SE | SW | N)** The direction (from the start hex) in which to create the shape. Each direction corresponds to a different arrangement of hexes. (optional, default `SE`)

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Hex](#hex)>** Array of hexes in a parallelogram arrangement.

### Grid#triangle

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/implementation.html#map-shapes)**

Creates a grid in the shape of a [(equilateral) triangle](https://en.wikipedia.org/wiki/Equilateral_triangle).

**Parameters**

-   `sideOrOptions` **([Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object))** The side length (in hexes) or an options object.
-   `start` **[Hex](#hex)** The origin hex. (optional, default `Hex()`)
-   `direction` **(down | up)** The direction (from the start hex) in which to create the shape. Each direction corresponds to a different arrangement of hexes. In this case a triangle pointing up/down (with pointy hexes) or right/left (with flat hexes). (optional, default `down`)

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Hex](#hex)>** Array of hexes in a triangular arrangement.

### Grid#hexagon

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/implementation.html#map-shapes)**

Creates a grid in the shape of a [hexagon](https://en.wikipedia.org/wiki/Hexagon).

**Parameters**

-   `radiusOrOptions` **([Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object))** The radius (in hexes) or an options object.
-   `center` **[Hex](#hex)** The center hex. (optional, default `Hex()`)

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Hex](#hex)>** Array of hexes in a hexagon arrangement (very meta ðŸ˜Ž).

### Grid#rectangle

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/implementation.html#map-shapes)**

Creates a grid in the shape of a [rectangle](https://en.wikipedia.org/wiki/Rectangle).

**Parameters**

-   `widthOrOptions` **([Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object))** The width (in hexes) or an options object.
-   `height` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** The height (in hexes).
-   `start` **[Hex](#hex)** The origin hex. (optional, default `Hex()`)
-   `direction` **(E | NW | SW | SE | NE | W)** The direction (from the start hex) in which to create the shape. Each direction corresponds to a different arrangement of hexes. The default direction for pointy hexes is 'E' and 'SE' for flat hexes. (optional, default `E/SE`)

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Hex](#hex)>** Array of hexes in a rectengular arrangement.

### ORIENTATIONS

The different orientations hexes can have.

#### POINTY

#### FLAT

### HexFactory

Factory that produces a [Hex](#hex) function to create hexes with. It accepts optional hex settings that are used to create a "family" of hexes that can be used in a grid (or individually). This "family" of hexes all share the same `prototype`.

**Parameters**

-   `settings` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Settings that apply to all hexes created with the returned [Hex](#hex) function. (optional, default `{}`)
    -   `settings.orientation` **(FLAT | POINTY)** All hexes are either POINTY â¬¢ or FLAT â¬£. (optional, default `POINTY`)
    -   `settings.size` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Size of all hexes. (optional, default `1`)
    -   `settings.origin` **[Point](#point)** Used to convert the hex position to a point. Defaults to the top left. (optional, default `Point()`)

Returns **[Hex](#hex)** A function to produce hexes, all with the same `prototype`.

### Hex

-   **See: [http://www.redblobgames.com/grids/hexagons/#coordinates](redblobgames.com)**

Factory function for creating hexes.

Coordinates not passed to the factory are inferred using the other coordinates:

-   When two coordinates are passed, the third coordinate is set to the result of [Hex.thirdCoordinate(firstCoordinate, secondCoordinate)](#hexthirdcoordinate).
-   When one coordinate is passed, the second coordinate is set to the first and the third coordinate is set to the result of [Hex.thirdCoordinate(firstCoordinate, secondCoordinate)](#hexthirdcoordinate).
-   When nothing or a falsy value is passed, all coordinates are set to `0`.

**Parameters**

-   `coordinates` **([Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object))** The x coordinate or an object containing any of the x, y and z coordinates. (optional, default `0`)
    -   `coordinates.x` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x coordinate. (optional, default `0`)
    -   `coordinates.y` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y coordinate. (optional, default `0`)
    -   `coordinates.z` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The z coordinate. (optional, default `0`)
-   `y` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y coordinate. (optional, default `0`)
-   `z` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The z coordinate. (optional, default `0`)

**Examples**

```javascript
Hex()            // returns hex( x: 0, y: 0, z: 0 )
Hex(1)           // returns hex( x: 1, y: 1, z: -2 )
Hex(1, 2)        // returns hex( x: 1, y: 2, z: -3 )
Hex(1, 2, -3)    // returns hex( x: 1, y: 2, z: -3 )
Hex(1, 2, 5)     // coordinates don't sum up to 0; throws an error

Hex({ x: 3 })    // returns hex( x: 3, y: 3, z: -3 )
Hex({ y: 3 })    // returns hex( x: 3, y: 3, z: -6 )
Hex({ z: 3 })    // returns hex( x: 3, y: -6, z: 3 )
```

Returns **[Hex](#hex)** A hex object. It always contains all three coordinates (`x`, `y` and `z`).

### Hex#coordinates

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The hex's x, y and z coordinates.

### Hex#isPointy

Returns **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether hexes have a pointy â¬¢ orientation.

### Hex#isFlat

Returns **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether hexes have a flat â¬£ orientation.

### Hex#oppositeCornerDistance

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The distance between opposite corners of a hex.

### Hex#oppositeSideDistance

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The distance between opposite sides of a hex.

### Hex#width

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The (horizontal) width of any hex.

### Hex#height

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The (vertical) height of any hex.

### Hex#corners

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Point](#point)>** Array of corner points. Starting at the top right corner for pointy hexes and the right corner for flat hexes.

### Hex#center

Returns **[Point](#point)** The relative center of any hex.

### Hex#toPoint

Converts the current hex to an (absolute) 2-dimensional [point](#point). Uses the hex's origin.

Returns **[Point](#point)** The 2D point the hex corresponds to.

### Hex.thirdCoordinate

Calculates the third coordinate from the other two. The sum of all three coordinates should always be 0.

**Parameters**

-   `firstCoordinate` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The first other coordinate.
-   `secondCoordinate` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The second other coordinate.

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The third coordinate.

### Hex.isValidSize

Determines if the passed size is valid. Should be a positive `Number`.

**Parameters**

-   `size` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The size to validate.

Returns **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Wheter the size is valid.

### Hex.hexesBetween

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/#line-drawing)**

**Parameters**

-   `firstHex` **[Hex](#hex)** The first hex.
-   `secondHex` **[Hex](#hex)** The second hex.

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Hex](#hex)>** Hexes between the passed first and second hex, inclusive.

### Hex.add

**Parameters**

-   `firstHex` **[Hex](#hex)** A hex.
-   `secondHex` **[Hex](#hex)** The hex that will be added to the first.

Returns **[Hex](#hex)** The sum of the passed hexes coordinates.

### Hex.subtract

**Parameters**

-   `firstHex` **[Hex](#hex)** A hex.
-   `secondHex` **[Hex](#hex)** The hex that will be subtracted from the first.

Returns **[Hex](#hex)** The difference between the passed hexes coordinates.

### Hex.neighbor

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/#neighbors)**

Returns the neighboring hex in the given direction.

**Parameters**

-   `hex` **[Hex](#hex)** The hex to get the neighboring hex from.
-   `direction` **(`0` \| `1` \| `2` \| `3` \| `4` \| `5`)** Any of the 6 directions. `0` is the Eastern direction (East-southeast when the hex is flat), `1` corresponds to 60Â° clockwise, `2` to 120Â° clockwise and so forth. (optional, default `0`)
-   `diagonal` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether to look for a neighbor perpendicular to the hex's corner instead of its side. (optional, default `false`)

Returns **[Hex](#hex)** The neighboring hex.

### Hex.distance

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/#distances)**

Returns the amount of hexes between the current and the given hex.

**Parameters**

-   `startHex` **[Hex](#hex)** The start hex.
-   `endHex` **[Hex](#hex)** The end hex.

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The amount of hexes between the passed start and end.

### Hex.round

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/#rounding)**

Rounds the passed floating point hex coordinates to their nearest integer hex coordinates.

**Parameters**

-   `hex` **[Hex](#hex)** The hex to be rounded.

Returns **[Hex](#hex)** A new hex with rounded coordinates.

### Hex.lerp

Returns an interpolation between the current hex and the passed hex for a `t` between 0 and 1.
More info on [wikipedia](https://en.wikipedia.org/wiki/Linear_interpolation).

**Parameters**

-   `firstHex` **[Hex](#hex)** The first hex.
-   `secondHex` **[Hex](#hex)** The second hex.
-   `t` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** A "parameter" between 0 and 1.

Returns **[Hex](#hex)** A new hex (with possibly fractional coordinates).

### Hex.nudge

-   **See: [redblobgames.com](http://www.redblobgames.com/grids/hexagons/#line-drawing)**

Returns a new hex with a tiny offset from the passed hex. Useful for interpolating in a consistent direction.

**Parameters**

-   `hex` **[Hex](#hex)** The hex to nudge.

Returns **[Hex](#hex)** A new hex with a minute offset.

### Point

Factory function for creating 2-dimensional points.

**Parameters**

-   `coordinatesOrX` **([Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object))** The x coordinate or an array or object of x and/or y coordinates. (optional, default `0`)
    -   `coordinatesOrX.x` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x coordinate. (optional, default `0`)
    -   `coordinatesOrX.y` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y coordinate. (optional, default `0`)
-   `y` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y coordinate. (optional, default `0`)

Returns **[Point](#point)** A point object.

### Point#add

**Parameters**

-   `point` **[Point](#point)** The point to add to the current point.

Returns **[Point](#point)** The sum of the passed point's coordinates to the current point's.

### Point#subtract

**Parameters**

-   `point` **[Point](#point)** The point to subtract from the current point.

Returns **[Point](#point)** The difference between the passed point's coordinates and the current point's.

### Point#multiply

**Parameters**

-   `point` **[Point](#point)** The point to multiply with the current point.

Returns **[Point](#point)** The multiplication of the passed point's coordinates and the current point's.

### Point#divide

**Parameters**

-   `point` **[Point](#point)** The point where the current point is divided by.

Returns **[Point](#point)** The division of the current point's coordinates and the passed point's.

### View

Factory function for creating views. A view instance can be used to render (a grid of) hexes. This function expects _raw_ DOM elements, i.e. it lacks helpers to convert strings to DOM elements. You can use other libraries (e.g. [jQuery](https://jquery.com/), [svg.js](http://svgjs.com/)) to help create these DOM elements.

**Parameters**

-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Options to instantiate the view with. (optional, default `{}`)
    -   `options.grid` **[Grid](#grid)** A grid instance.
    -   `options.template` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** Template function that should return a DOM element. When hexes are rendered (e.g. by calling [View#renderGrid](#viewrendergrid) or [View#renderHexes](#viewrenderhexes)), the template function is passed each hex. In the template function `this` refers to the view instance, so any view method can be called.
    -   `options.container` **[Node](https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling)** The container in which hexes are to be rendered. Should be an existing DOM element (e.g. a `<div>` or `<svg>`) in the `document`.
    -   `options.origin` **[Point](#point)** Pixel origin where the start hex (`Hex(0, 0, 0)`) is placed. Defaults to `Point(0, 0)`, i.e.: the top left corner of the container. The origin is relative to the container (not to the `document`). (optional, default `Point(0,0)`)

Returns **[View](#view)** A view instance to render hexes in.

### View#renderGrid

Renders all hexes that fit in the container, plus the optional padding. This padding defaults to 3 (hexes), so that the container is completely covered in hexes.

**Parameters**

-   `padding` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Number of hexes to add to all 4 sides of the container. Can be used to guarantee the container is completely covered in hexes. (optional, default `3`)

Returns **[View](#view)** The view instance, for chaining.

### View#renderHexes

Renders the passed hexes in the container.

**Parameters**

-   `hexes` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Hex](#hex)>** An array of hexes to render. [Grid](#grid)'s shape methods can be used to generate this array.

Returns **[View](#view)** The view instance, for chaining.

### View#hexToPixel

Converts the passed hex to a pixel position relative to the container.

**Parameters**

-   `hex` **[Hex](#hex)** The hex to convert to a pixel position.

Returns **[Point](#point)** The pixel position.

### View#pixelToHex

Converts the passed pixel position (relative to the container) to the corresponding hex.

**Parameters**

-   `pixel` **[Point](#point)** The pixel position to convert to a hex.

Returns **[Hex](#hex)** The corresponding (rounded) hex.

### View#width

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The rounded amount of hexes that fit in the container horizontally â†”.

### View#height

Returns **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The rounded amount of hexes that fit in the container vertically â†•.

## Backlog

### Bugs

1.  Get `babel-polyfill` (or `babel-runtime`?) to work with `babel-preset-env`, preferably without including a bazillion unused polyfills in the dist...
2.  Docs: find a way to link modules together. Currently, methods of the factory functions doesn't seem to belong to their factory functions (in the context of jsdoc). This bug is nasty, tried lots of things already...

### Features

1.  Use either "compass" or numbered directions, not both.
2.  Add possibility to [stretch hexes](http://www.redblobgames.com/grids/hexagons/implementation.html#layout-test-size-tall); they needn't be regularly shaped. This is an [actual request](https://github.com/flauwekeul/honeycomb/issues/1) as well.
3.  Make it an option to filter overlapping hexes when multiple shapes are rendered.
4.  More examples in docs. Preferably examples that show code _and_ the results. Still looking for a tool that does this.
5.  Shiny github.io pages ðŸ˜Ž
6.  View should be hex-orientation-agnostic (always pointy) and just use `transform` to toggle orientations.
7.  Maybe add instance methods for `Grid` and `Views.DOM` to get/set options. Then it's optional to pass the options to the `Grid` and `Views.DOM` factories and makes it possible to get/set those options later.
8.  Add possibility to create individual hexes with different size/orientation/origin/template.
9.  Add helper to easily fall back to a hex's prototype.

### Refactorings

1.  Replace Webpack by Rollup, because it's supposed to be [more suitable for libraries](https://medium.com/webpack/webpack-and-rollup-the-same-but-different-a41ad427058c).
2.  Update code (and tests) of `Point` to be more consice with other modules.
3.  Grid shape methods should return Sets instead of arrays.
4.  Put tests in same directory as the code they're testing?
